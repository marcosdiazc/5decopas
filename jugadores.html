<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Jugadores - 5 de Copas FC</title>
  <base href="/5decopas/">
  <link rel="stylesheet" href="static/styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>
  <header>
    <div class="container header-content">
      <a href="index.html"><img src="static/logo.png" alt="Logo" class="logo" /></a>
      <h1>5 de Copas FC</h1>
      <nav>
        <ul>
          <li><a href="index.html">Inicio</a></li>
          <li><a href="inscripcion.html">Inscribirme</a></li>
          <li><a href="jugadores.html">Jugadores</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container">
    <h2>Jugadores Inscritos</h2>

    <div class="tabs" id="tabs-container">
      <div class="tab active" data-filter="Todos">Todos</div>
      <div class="tab" data-filter="Masculino">Masculino</div>
      <div class="tab" data-filter="Femenino">Femenino</div>
      <div class="tab" data-filter="Azul">Azul</div>
      <div class="tab" data-filter="Blanco">Blanco</div>
      <div class="tab" data-filter="Celeste">Celeste</div>
    </div>

    <input type="text" id="buscador" placeholder="Buscar por nombre..." />

    <table id="tabla-jugadores">
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Email</th>
          <th>Género</th>
          <th>Equipo</th>
          <th>Posición</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </main>

  <footer>
    <p>© 2025 5 de Copas Fútbol Club</p>
  </footer>

  <script>
    async function obtenerJugadores() {
      const res = await fetch("https://fivedecopas-backend.onrender.com/jugadores");
      const data = await res.json();
      return data;
    }

    function renderJugadores(jugadores) {
      const tbody = document.querySelector("#tabla-jugadores tbody");
      tbody.innerHTML = "";
      jugadores.forEach(j => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${j.name}</td>
          <td>${j.email}</td>
          <td>${j.genero}</td>
          <td>${j.equipo}</td>
          <td>${j.position}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    function aplicarFiltros(jugadores) {
      const filtro = document.querySelector(".tab.active").dataset.filter;
      const query = document.getElementById("buscador").value.toLowerCase();

      return jugadores.filter(j => {
        const matchGenero = (filtro === "Todos" || j.genero === filtro || j.equipo === filtro);
        const matchNombre = j.name.toLowerCase().includes(query);
        return matchGenero && matchNombre;
      });
    }

    async function iniciar() {
      const jugadores = await obtenerJugadores();
      renderJugadores(jugadores);

      document.querySelectorAll(".tab").forEach(tab => {
        tab.addEventListener("click", () => {
          document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
          tab.classList.add("active");
          renderJugadores(aplicarFiltros(jugadores));
        });
      });

      document.getElementById("buscador").addEventListener("input", () => {
        renderJugadores(aplicarFiltros(jugadores));
      });
    }

    iniciar();
  </script>
</body>
</html>
